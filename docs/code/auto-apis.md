# 🌐 API Endpoints

> 🤖 이 문서는 자동으로 생성되었습니다. 수정 시 다음 생성에서 덮어쓰여집니다.

## 📚 목차

- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [route.ts](#route-ts)
- [page.tsx](#page-tsx)
- [api-client.ts](#api-client-ts)
- [error-handler.ts](#error-handler-ts)
- [route-handler.ts](#route-handler-ts)


## route.ts

**파일 경로:** `app/api/admin/database/route.ts`

**파일 정보:**
- 📏 크기: 6279 bytes
- 📄 라인 수: 225
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/ai/assist/route.ts`

**파일 정보:**
- 📏 크기: 7538 bytes
- 📄 라인 수: 325
- 🔧 함수: 10개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 3개

**Exports:**
- `async`
- `UserComponent`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `generateAISuggestions`

**특성:** `async`

#### `generatePairProgrammingSuggestions`

#### `UserComponent`

**특성:** `exported`

#### `handleLogin`

#### `generateCodeSuggestions`

#### `POST`

**특성:** `exported`, `async`

#### `generateProblemSolutions`

#### `isValidUser`

#### `generateCodeReview`

### 🔗 Interfaces

#### `AIContext`

#### `AISuggestion`

#### `UserState`


## route.ts

**파일 경로:** `app/api/ai/generate-code/route.ts`

**파일 정보:**
- 📏 크기: 17157 bytes
- 📄 라인 수: 658
- 🔧 함수: 11개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 3개

**Exports:**
- `async`
- `UserProfileCard`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `generateCode`

**특성:** `async`

#### `generateComponentCode`

#### `UserProfileCard`

#### `handleFollowClick`

#### `generateAPICode`

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`

#### `generateDatabaseCode`

#### `generateTestCode`

#### `generateConfigCode`

### 🔗 Interfaces

#### `CodeGenerationRequest`

#### `GeneratedCode`

#### `UserProfileCardProps`


## route.ts

**파일 경로:** `app/api/ai/pair-programming/route.ts`

**파일 정보:**
- 📏 크기: 4945 bytes
- 📄 라인 수: 175
- 🔧 함수: 4개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 2개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `generateNavigatorSuggestions`

**특성:** `async`

#### `useUserData`

#### `GET`

**특성:** `exported`, `async`

### 🔗 Interfaces

#### `PairProgrammingContext`

#### `NavigatorSuggestion`


## route.ts

**파일 경로:** `app/api/ai/solve-problem/route.ts`

**파일 정보:**
- 📏 크기: 5097 bytes
- 📄 라인 수: 201
- 🔧 함수: 4개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 2개

**Exports:**
- `async`
- `ExpensiveComponent`
- `React`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `findSolutions`

**특성:** `async`

#### `ExpensiveComponent`

#### `ExpensiveComponent`

### 🔗 Interfaces

#### `ProblemSolvingRequest`

#### `Solution`


## route.ts

**파일 경로:** `app/api/alerts/route.ts`

**파일 정보:**
- 📏 크기: 6206 bytes
- 📄 라인 수: 202
- 🔧 함수: 3개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`

#### `PATCH`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/analytics/behavior/route.ts`

**파일 정보:**
- 📏 크기: 1953 bytes
- 📄 라인 수: 54
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/analytics/conversion/route.ts`

**파일 정보:**
- 📏 크기: 1472 bytes
- 📄 라인 수: 43
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/analytics/retention/route.ts`

**파일 정보:**
- 📏 크기: 1234 bytes
- 📄 라인 수: 37
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/analytics/route.ts`

**파일 정보:**
- 📏 크기: 6983 bytes
- 📄 라인 수: 237
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 2개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`

### 🔗 Interfaces

#### `AnalyticsEventData`

#### `AnalyticsEvent`


## route.ts

**파일 경로:** `app/api/auth/logout/route.ts`

**파일 정보:**
- 📏 크기: 2030 bytes
- 📄 라인 수: 69
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/auth/signin-test/route.ts`

**파일 정보:**
- 📏 크기: 555 bytes
- 📄 라인 수: 20
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/auth/test/route.ts`

**파일 정보:**
- 📏 크기: 438 bytes
- 📄 라인 수: 21
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/backup/restore/route.ts`

**파일 정보:**
- 📏 크기: 3201 bytes
- 📄 라인 수: 115
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/backup/route.ts`

**파일 정보:**
- 📏 크기: 3552 bytes
- 📄 라인 수: 120
- 🔧 함수: 0개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `GET`
- `POST`


## route.ts

**파일 경로:** `app/api/billing/create-checkout/route.ts`

**파일 정보:**
- 📏 크기: 2618 bytes
- 📄 라인 수: 94
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/calendar/calendars/route.ts`

**파일 정보:**
- 📏 크기: 754 bytes
- 📄 라인 수: 26
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/calendar/check/route.ts`

**파일 정보:**
- 📏 크기: 658 bytes
- 📄 라인 수: 18
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/calendar/sync/route.ts`

**파일 정보:**
- 📏 크기: 3037 bytes
- 📄 라인 수: 102
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/cron/database-maintenance/route.ts`

**파일 정보:**
- 📏 크기: 6842 bytes
- 📄 라인 수: 223
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 1개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

### 🔗 Interfaces

#### `MaintenanceTask`


## route.ts

**파일 경로:** `app/api/csrf-token/route.ts`

**파일 정보:**
- 📏 크기: 1318 bytes
- 📄 라인 수: 55
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/errors/route.ts`

**파일 정보:**
- 📏 크기: 8731 bytes
- 📄 라인 수: 291
- 🔧 함수: 8개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 1개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`

#### `categorizeErrorSeverity`

#### `categorizeError`

#### `getTopErrors`

#### `calculateErrorRate`

#### `sendToErrorTrackingService`

**특성:** `async`

#### `sendCriticalErrorAlert`

**특성:** `async`

### 🔗 Interfaces

#### `ErrorReport`


## route.ts

**파일 경로:** `app/api/export/route.ts`

**파일 정보:**
- 📏 크기: 3388 bytes
- 📄 라인 수: 113
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`
- `data`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/feedback/route.ts`

**파일 정보:**
- 📏 크기: 5301 bytes
- 📄 라인 수: 187
- 🔧 함수: 4개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 1개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`

#### `isAdmin`

#### `notifyTeam`

**특성:** `async`

### 🔗 Interfaces

#### `FeedbackData`


## route.ts

**파일 경로:** `app/api/gmail/analyze/route.ts`

**파일 정보:**
- 📏 크기: 1323 bytes
- 📄 라인 수: 38
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/gmail/check/route.ts`

**파일 정보:**
- 📏 크기: 994 bytes
- 📄 라인 수: 29
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/gmail/search/route.ts`

**파일 정보:**
- 📏 크기: 1059 bytes
- 📄 라인 수: 34
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/health/db/route.ts`

**파일 정보:**
- 📏 크기: 1582 bytes
- 📄 라인 수: 49
- 🔧 함수: 0개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `GET`


## route.ts

**파일 경로:** `app/api/health/route.ts`

**파일 정보:**
- 📏 크기: 3731 bytes
- 📄 라인 수: 120
- 🔧 함수: 3개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `formatUptime`

#### `calculateErrorRate`


## route.ts

**파일 경로:** `app/api/import/route.ts`

**파일 정보:**
- 📏 크기: 5925 bytes
- 📄 라인 수: 187
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/logs/route.ts`

**파일 정보:**
- 📏 크기: 3247 bytes
- 📄 라인 수: 122
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `storeLog`
- `GET`
- `POST`

### 🔧 Functions

#### `storeLog`

**특성:** `exported`


## route.ts

**파일 경로:** `app/api/metrics/business/route.ts`

**파일 정보:**
- 📏 크기: 5792 bytes
- 📄 라인 수: 193
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `calculateChange`


## route.ts

**파일 경로:** `app/api/metrics/performance/route.ts`

**파일 정보:**
- 📏 크기: 2130 bytes
- 📄 라인 수: 69
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/metrics/route.ts`

**파일 정보:**
- 📏 크기: 3055 bytes
- 📄 라인 수: 98
- 🔧 함수: 3개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `GET`

### 🔧 Functions

#### `calculateErrorRate`

#### `calculateAvgResponseTime`

#### `calculateActiveUsers`


## route.ts

**파일 경로:** `app/api/monitoring/alerts/route.ts`

**파일 정보:**
- 📏 크기: 2184 bytes
- 📄 라인 수: 88
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/monitoring/metrics/route.ts`

**파일 정보:**
- 📏 크기: 5648 bytes
- 📄 라인 수: 182
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 1개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`

### 🔗 Interfaces

#### `MetricsResponse`


## route.ts

**파일 경로:** `app/api/monitoring/performance/route.ts`

**설명:** API Performance Monitoring Endpoint
Collects and reports client-side performance metrics

**파일 정보:**
- 📏 크기: 10712 bytes
- 📄 라인 수: 401
- 🔧 함수: 14개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 2개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`

#### `GET`

**특성:** `exported`, `async`

#### `handleWebVitals`

**특성:** `async`

#### `handleAPIPerformance`

**특성:** `async`

#### `handleResourceTiming`

**특성:** `async`

#### `handleMemoryUsage`

**특성:** `async`

#### `getPerformanceSummary`

**특성:** `async`

#### `getWebVitalsMetrics`

**특성:** `async`

#### `getAPIPerformanceMetrics`

**특성:** `async`

#### `getCacheStats`

**특성:** `async`

#### `getDeviceType`

#### `getResourceType`

#### `calculatePerformanceScore`

#### `generateMetricData`

### 🔗 Interfaces

#### `PerformanceMetric`

#### `APIPerformanceMetric`


## route.ts

**파일 경로:** `app/api/notifications/route.ts`

**파일 정보:**
- 📏 크기: 4159 bytes
- 📄 라인 수: 133
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/notifications/visa-alerts/route.ts`

**파일 정보:**
- 📏 크기: 1321 bytes
- 📄 라인 수: 46
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/recovery/route.ts`

**파일 정보:**
- 📏 크기: 2566 bytes
- 📄 라인 수: 80
- 🔧 함수: 0개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `POST`


## route.ts

**파일 경로:** `app/api/robots/route.ts`

**파일 정보:**
- 📏 크기: 781 bytes
- 📄 라인 수: 42
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/schengen/route.ts`

**설명:** PURPOSE: 셰겐 90/180일 규칙 계산 API - 사용자의 여행 기록 기반 체류 가능 일수 계산

**파일 정보:**
- 📏 크기: 3187 bytes
- 📄 라인 수: 85
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 2개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

### 🏷️ Types

- `VisaType`
- `PassportCountry`


## route.ts

**파일 경로:** `app/api/sitemap/route.ts`

**파일 정보:**
- 📏 크기: 2402 bytes
- 📄 라인 수: 93
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/stats/route.ts`

**파일 정보:**
- 📏 크기: 4501 bytes
- 📄 라인 수: 142
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/trips/[id]/route.ts`

**파일 정보:**
- 📏 크기: 5653 bytes
- 📄 라인 수: 186
- 🔧 함수: 4개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `checkTripOwnership`

**특성:** `async`

#### `GET`

**특성:** `exported`, `async`

#### `PUT`

**특성:** `exported`, `async`

#### `DELETE`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/trips/insights/route.ts`

**파일 정보:**
- 📏 크기: 1648 bytes
- 📄 라인 수: 50
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/trips/route.ts`

**파일 정보:**
- 📏 크기: 9153 bytes
- 📄 라인 수: 262
- 🔧 함수: 2개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `GET`

**특성:** `exported`, `async`

#### `POST`

**특성:** `exported`, `async`


## route.ts

**파일 경로:** `app/api/trips/validate/route.ts`

**파일 정보:**
- 📏 크기: 3088 bytes
- 📄 라인 수: 93
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `async`

### 🔧 Functions

#### `POST`

**특성:** `exported`, `async`


## page.tsx

**파일 경로:** `app/docs/api/page.tsx`

**파일 정보:**
- 📏 크기: 298 bytes
- 📄 라인 수: 11
- 🔧 함수: 1개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 0개

**Exports:**
- `metadata`
- `ApiDocsPage`

### 🔧 Functions

#### `ApiDocsPage`


## api-client.ts

**파일 경로:** `lib/api/api-client.ts`

**파일 정보:**
- 📏 크기: 8120 bytes
- 📄 라인 수: 315
- 🔧 함수: 0개
- 📦 클래스: 2개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 4개

**Exports:**
- `APIConfig`
- `RetryConfig`
- `CacheConfig`
- `RequestOptions`
- `APIError`
- `APIClient`

### 📦 Classes

#### `APIError`

**특성:** `exported`

#### `APIClient`

**특성:** `exported`

### 🔗 Interfaces

#### `APIConfig`

**특성:** `exported`

#### `RetryConfig`

**특성:** `exported`

#### `CacheConfig`

**특성:** `exported`

#### `RequestOptions`

**특성:** `exported`


## error-handler.ts

**파일 경로:** `lib/api/error-handler.ts`

**파일 정보:**
- 📏 크기: 6028 bytes
- 📄 라인 수: 215
- 🔧 함수: 5개
- 📦 클래스: 0개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 2개

**Exports:**
- `APIError`
- `APIErrorResponse`
- `enum`
- `createErrorResponse`
- `handleApiError`
- `createValidationError`
- `generateRequestId`

### 🔧 Functions

#### `createErrorResponse`

Standard API Error Response
Provides consistent error handling across all API routes
/

export interface APIError {
  error: string
  details?: string | object
  code?: string
  timestamp?: string
  requestId?: string
}

export interface APIErrorResponse {
  success: false
  error: APIError
}

export enum ErrorCode {
  // Client errors (4xx)
  BAD_REQUEST = 'BAD_REQUEST',
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  NOT_FOUND = 'NOT_FOUND',
  METHOD_NOT_ALLOWED = 'METHOD_NOT_ALLOWED',
  CONFLICT = 'CONFLICT',
  UNPROCESSABLE_ENTITY = 'UNPROCESSABLE_ENTITY',
  TOO_MANY_REQUESTS = 'TOO_MANY_REQUESTS',
  
  // Server errors (5xx)
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  NOT_IMPLEMENTED = 'NOT_IMPLEMENTED',
  BAD_GATEWAY = 'BAD_GATEWAY',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',
  GATEWAY_TIMEOUT = 'GATEWAY_TIMEOUT',
  
  // Custom errors
  DATABASE_ERROR = 'DATABASE_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR',
  AUTHORIZATION_ERROR = 'AUTHORIZATION_ERROR',
  EXTERNAL_SERVICE_ERROR = 'EXTERNAL_SERVICE_ERROR',
  RATE_LIMIT_ERROR = 'RATE_LIMIT_ERROR',
  CSRF_ERROR = 'CSRF_ERROR'
}

const ErrorStatusMap: Record<ErrorCode, number> = {
  // Client errors
  [ErrorCode.BAD_REQUEST]: 400,
  [ErrorCode.UNAUTHORIZED]: 401,
  [ErrorCode.FORBIDDEN]: 403,
  [ErrorCode.NOT_FOUND]: 404,
  [ErrorCode.METHOD_NOT_ALLOWED]: 405,
  [ErrorCode.CONFLICT]: 409,
  [ErrorCode.UNPROCESSABLE_ENTITY]: 422,
  [ErrorCode.TOO_MANY_REQUESTS]: 429,
  
  // Server errors
  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,
  [ErrorCode.NOT_IMPLEMENTED]: 501,
  [ErrorCode.BAD_GATEWAY]: 502,
  [ErrorCode.SERVICE_UNAVAILABLE]: 503,
  [ErrorCode.GATEWAY_TIMEOUT]: 504,
  
  // Custom errors mapped to appropriate status codes
  [ErrorCode.DATABASE_ERROR]: 500,
  [ErrorCode.VALIDATION_ERROR]: 400,
  [ErrorCode.AUTHENTICATION_ERROR]: 401,
  [ErrorCode.AUTHORIZATION_ERROR]: 403,
  [ErrorCode.EXTERNAL_SERVICE_ERROR]: 502,
  [ErrorCode.RATE_LIMIT_ERROR]: 429,
  [ErrorCode.CSRF_ERROR]: 403
}

/**
Create a standardized error response

**특성:** `exported`

#### `handleApiError`

Standard API Error Response
Provides consistent error handling across all API routes
/

export interface APIError {
  error: string
  details?: string | object
  code?: string
  timestamp?: string
  requestId?: string
}

export interface APIErrorResponse {
  success: false
  error: APIError
}

export enum ErrorCode {
  // Client errors (4xx)
  BAD_REQUEST = 'BAD_REQUEST',
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  NOT_FOUND = 'NOT_FOUND',
  METHOD_NOT_ALLOWED = 'METHOD_NOT_ALLOWED',
  CONFLICT = 'CONFLICT',
  UNPROCESSABLE_ENTITY = 'UNPROCESSABLE_ENTITY',
  TOO_MANY_REQUESTS = 'TOO_MANY_REQUESTS',
  
  // Server errors (5xx)
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  NOT_IMPLEMENTED = 'NOT_IMPLEMENTED',
  BAD_GATEWAY = 'BAD_GATEWAY',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',
  GATEWAY_TIMEOUT = 'GATEWAY_TIMEOUT',
  
  // Custom errors
  DATABASE_ERROR = 'DATABASE_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR',
  AUTHORIZATION_ERROR = 'AUTHORIZATION_ERROR',
  EXTERNAL_SERVICE_ERROR = 'EXTERNAL_SERVICE_ERROR',
  RATE_LIMIT_ERROR = 'RATE_LIMIT_ERROR',
  CSRF_ERROR = 'CSRF_ERROR'
}

const ErrorStatusMap: Record<ErrorCode, number> = {
  // Client errors
  [ErrorCode.BAD_REQUEST]: 400,
  [ErrorCode.UNAUTHORIZED]: 401,
  [ErrorCode.FORBIDDEN]: 403,
  [ErrorCode.NOT_FOUND]: 404,
  [ErrorCode.METHOD_NOT_ALLOWED]: 405,
  [ErrorCode.CONFLICT]: 409,
  [ErrorCode.UNPROCESSABLE_ENTITY]: 422,
  [ErrorCode.TOO_MANY_REQUESTS]: 429,
  
  // Server errors
  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,
  [ErrorCode.NOT_IMPLEMENTED]: 501,
  [ErrorCode.BAD_GATEWAY]: 502,
  [ErrorCode.SERVICE_UNAVAILABLE]: 503,
  [ErrorCode.GATEWAY_TIMEOUT]: 504,
  
  // Custom errors mapped to appropriate status codes
  [ErrorCode.DATABASE_ERROR]: 500,
  [ErrorCode.VALIDATION_ERROR]: 400,
  [ErrorCode.AUTHENTICATION_ERROR]: 401,
  [ErrorCode.AUTHORIZATION_ERROR]: 403,
  [ErrorCode.EXTERNAL_SERVICE_ERROR]: 502,
  [ErrorCode.RATE_LIMIT_ERROR]: 429,
  [ErrorCode.CSRF_ERROR]: 403
}

/**
Create a standardized error response
/
export function createErrorResponse(
  code: ErrorCode,
  message?: string,
  details?: string | object,
  requestId?: string
): NextResponse<APIErrorResponse> {
  const status = ErrorStatusMap[code] || 500
  const timestamp = new Date().toISOString()
  
  const errorResponse: APIErrorResponse = {
    success: false,
    error: {
      error: message || getDefaultErrorMessage(code),
      code,
      timestamp,
      ...(details && { details }),
      ...(requestId && { requestId })
    }
  }
  
  // Log server errors
  if (status >= 500) {
    // Server error detected
  }
  
  return NextResponse.json(errorResponse, { status })
}

/**
Handle unknown errors and convert them to standardized responses

**특성:** `exported`

#### `getDefaultErrorMessage`

Standard API Error Response
Provides consistent error handling across all API routes
/

export interface APIError {
  error: string
  details?: string | object
  code?: string
  timestamp?: string
  requestId?: string
}

export interface APIErrorResponse {
  success: false
  error: APIError
}

export enum ErrorCode {
  // Client errors (4xx)
  BAD_REQUEST = 'BAD_REQUEST',
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  NOT_FOUND = 'NOT_FOUND',
  METHOD_NOT_ALLOWED = 'METHOD_NOT_ALLOWED',
  CONFLICT = 'CONFLICT',
  UNPROCESSABLE_ENTITY = 'UNPROCESSABLE_ENTITY',
  TOO_MANY_REQUESTS = 'TOO_MANY_REQUESTS',
  
  // Server errors (5xx)
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  NOT_IMPLEMENTED = 'NOT_IMPLEMENTED',
  BAD_GATEWAY = 'BAD_GATEWAY',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',
  GATEWAY_TIMEOUT = 'GATEWAY_TIMEOUT',
  
  // Custom errors
  DATABASE_ERROR = 'DATABASE_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR',
  AUTHORIZATION_ERROR = 'AUTHORIZATION_ERROR',
  EXTERNAL_SERVICE_ERROR = 'EXTERNAL_SERVICE_ERROR',
  RATE_LIMIT_ERROR = 'RATE_LIMIT_ERROR',
  CSRF_ERROR = 'CSRF_ERROR'
}

const ErrorStatusMap: Record<ErrorCode, number> = {
  // Client errors
  [ErrorCode.BAD_REQUEST]: 400,
  [ErrorCode.UNAUTHORIZED]: 401,
  [ErrorCode.FORBIDDEN]: 403,
  [ErrorCode.NOT_FOUND]: 404,
  [ErrorCode.METHOD_NOT_ALLOWED]: 405,
  [ErrorCode.CONFLICT]: 409,
  [ErrorCode.UNPROCESSABLE_ENTITY]: 422,
  [ErrorCode.TOO_MANY_REQUESTS]: 429,
  
  // Server errors
  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,
  [ErrorCode.NOT_IMPLEMENTED]: 501,
  [ErrorCode.BAD_GATEWAY]: 502,
  [ErrorCode.SERVICE_UNAVAILABLE]: 503,
  [ErrorCode.GATEWAY_TIMEOUT]: 504,
  
  // Custom errors mapped to appropriate status codes
  [ErrorCode.DATABASE_ERROR]: 500,
  [ErrorCode.VALIDATION_ERROR]: 400,
  [ErrorCode.AUTHENTICATION_ERROR]: 401,
  [ErrorCode.AUTHORIZATION_ERROR]: 403,
  [ErrorCode.EXTERNAL_SERVICE_ERROR]: 502,
  [ErrorCode.RATE_LIMIT_ERROR]: 429,
  [ErrorCode.CSRF_ERROR]: 403
}

/**
Create a standardized error response
/
export function createErrorResponse(
  code: ErrorCode,
  message?: string,
  details?: string | object,
  requestId?: string
): NextResponse<APIErrorResponse> {
  const status = ErrorStatusMap[code] || 500
  const timestamp = new Date().toISOString()
  
  const errorResponse: APIErrorResponse = {
    success: false,
    error: {
      error: message || getDefaultErrorMessage(code),
      code,
      timestamp,
      ...(details && { details }),
      ...(requestId && { requestId })
    }
  }
  
  // Log server errors
  if (status >= 500) {
    // Server error detected
  }
  
  return NextResponse.json(errorResponse, { status })
}

/**
Handle unknown errors and convert them to standardized responses
/
export function handleApiError(
  error: unknown,
  defaultCode: ErrorCode = ErrorCode.INTERNAL_SERVER_ERROR,
  requestId?: string
): NextResponse<APIErrorResponse> {
  // Handle known error types
  if (error instanceof Error) {
    // Prisma errors
    if (error.message.includes('P2002')) {
      return createErrorResponse(
        ErrorCode.CONFLICT,
        'Resource already exists',
        error.message,
        requestId
      )
    }
    
    if (error.message.includes('P2025')) {
      return createErrorResponse(
        ErrorCode.NOT_FOUND,
        'Resource not found',
        error.message,
        requestId
      )
    }
    
    // Database connection errors
    if (error.message.includes('database') || error.message.includes('prisma')) {
      return createErrorResponse(
        ErrorCode.DATABASE_ERROR,
        'Database operation failed',
        process.env.NODE_ENV === 'development' ? error.message : undefined,
        requestId
      )
    }
    
    // Default error response
    return createErrorResponse(
      defaultCode,
      error.message,
      process.env.NODE_ENV === 'development' ? error.stack : undefined,
      requestId
    )
  }
  
  // Handle non-Error objects
  return createErrorResponse(
    defaultCode,
    'An unexpected error occurred',
    process.env.NODE_ENV === 'development' ? error : undefined,
    requestId
  )
}

/**
Get default error message for error code

#### `createValidationError`

Standard API Error Response
Provides consistent error handling across all API routes
/

export interface APIError {
  error: string
  details?: string | object
  code?: string
  timestamp?: string
  requestId?: string
}

export interface APIErrorResponse {
  success: false
  error: APIError
}

export enum ErrorCode {
  // Client errors (4xx)
  BAD_REQUEST = 'BAD_REQUEST',
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  NOT_FOUND = 'NOT_FOUND',
  METHOD_NOT_ALLOWED = 'METHOD_NOT_ALLOWED',
  CONFLICT = 'CONFLICT',
  UNPROCESSABLE_ENTITY = 'UNPROCESSABLE_ENTITY',
  TOO_MANY_REQUESTS = 'TOO_MANY_REQUESTS',
  
  // Server errors (5xx)
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  NOT_IMPLEMENTED = 'NOT_IMPLEMENTED',
  BAD_GATEWAY = 'BAD_GATEWAY',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',
  GATEWAY_TIMEOUT = 'GATEWAY_TIMEOUT',
  
  // Custom errors
  DATABASE_ERROR = 'DATABASE_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR',
  AUTHORIZATION_ERROR = 'AUTHORIZATION_ERROR',
  EXTERNAL_SERVICE_ERROR = 'EXTERNAL_SERVICE_ERROR',
  RATE_LIMIT_ERROR = 'RATE_LIMIT_ERROR',
  CSRF_ERROR = 'CSRF_ERROR'
}

const ErrorStatusMap: Record<ErrorCode, number> = {
  // Client errors
  [ErrorCode.BAD_REQUEST]: 400,
  [ErrorCode.UNAUTHORIZED]: 401,
  [ErrorCode.FORBIDDEN]: 403,
  [ErrorCode.NOT_FOUND]: 404,
  [ErrorCode.METHOD_NOT_ALLOWED]: 405,
  [ErrorCode.CONFLICT]: 409,
  [ErrorCode.UNPROCESSABLE_ENTITY]: 422,
  [ErrorCode.TOO_MANY_REQUESTS]: 429,
  
  // Server errors
  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,
  [ErrorCode.NOT_IMPLEMENTED]: 501,
  [ErrorCode.BAD_GATEWAY]: 502,
  [ErrorCode.SERVICE_UNAVAILABLE]: 503,
  [ErrorCode.GATEWAY_TIMEOUT]: 504,
  
  // Custom errors mapped to appropriate status codes
  [ErrorCode.DATABASE_ERROR]: 500,
  [ErrorCode.VALIDATION_ERROR]: 400,
  [ErrorCode.AUTHENTICATION_ERROR]: 401,
  [ErrorCode.AUTHORIZATION_ERROR]: 403,
  [ErrorCode.EXTERNAL_SERVICE_ERROR]: 502,
  [ErrorCode.RATE_LIMIT_ERROR]: 429,
  [ErrorCode.CSRF_ERROR]: 403
}

/**
Create a standardized error response
/
export function createErrorResponse(
  code: ErrorCode,
  message?: string,
  details?: string | object,
  requestId?: string
): NextResponse<APIErrorResponse> {
  const status = ErrorStatusMap[code] || 500
  const timestamp = new Date().toISOString()
  
  const errorResponse: APIErrorResponse = {
    success: false,
    error: {
      error: message || getDefaultErrorMessage(code),
      code,
      timestamp,
      ...(details && { details }),
      ...(requestId && { requestId })
    }
  }
  
  // Log server errors
  if (status >= 500) {
    // Server error detected
  }
  
  return NextResponse.json(errorResponse, { status })
}

/**
Handle unknown errors and convert them to standardized responses
/
export function handleApiError(
  error: unknown,
  defaultCode: ErrorCode = ErrorCode.INTERNAL_SERVER_ERROR,
  requestId?: string
): NextResponse<APIErrorResponse> {
  // Handle known error types
  if (error instanceof Error) {
    // Prisma errors
    if (error.message.includes('P2002')) {
      return createErrorResponse(
        ErrorCode.CONFLICT,
        'Resource already exists',
        error.message,
        requestId
      )
    }
    
    if (error.message.includes('P2025')) {
      return createErrorResponse(
        ErrorCode.NOT_FOUND,
        'Resource not found',
        error.message,
        requestId
      )
    }
    
    // Database connection errors
    if (error.message.includes('database') || error.message.includes('prisma')) {
      return createErrorResponse(
        ErrorCode.DATABASE_ERROR,
        'Database operation failed',
        process.env.NODE_ENV === 'development' ? error.message : undefined,
        requestId
      )
    }
    
    // Default error response
    return createErrorResponse(
      defaultCode,
      error.message,
      process.env.NODE_ENV === 'development' ? error.stack : undefined,
      requestId
    )
  }
  
  // Handle non-Error objects
  return createErrorResponse(
    defaultCode,
    'An unexpected error occurred',
    process.env.NODE_ENV === 'development' ? error : undefined,
    requestId
  )
}

/**
Get default error message for error code
/
function getDefaultErrorMessage(code: ErrorCode): string {
  const messages: Record<ErrorCode, string> = {
    [ErrorCode.BAD_REQUEST]: 'Invalid request',
    [ErrorCode.UNAUTHORIZED]: 'Authentication required',
    [ErrorCode.FORBIDDEN]: 'Access denied',
    [ErrorCode.NOT_FOUND]: 'Resource not found',
    [ErrorCode.METHOD_NOT_ALLOWED]: 'Method not allowed',
    [ErrorCode.CONFLICT]: 'Resource conflict',
    [ErrorCode.UNPROCESSABLE_ENTITY]: 'Unprocessable entity',
    [ErrorCode.TOO_MANY_REQUESTS]: 'Too many requests',
    [ErrorCode.INTERNAL_SERVER_ERROR]: 'Internal server error',
    [ErrorCode.NOT_IMPLEMENTED]: 'Not implemented',
    [ErrorCode.BAD_GATEWAY]: 'Bad gateway',
    [ErrorCode.SERVICE_UNAVAILABLE]: 'Service unavailable',
    [ErrorCode.GATEWAY_TIMEOUT]: 'Gateway timeout',
    [ErrorCode.DATABASE_ERROR]: 'Database error',
    [ErrorCode.VALIDATION_ERROR]: 'Validation failed',
    [ErrorCode.AUTHENTICATION_ERROR]: 'Authentication failed',
    [ErrorCode.AUTHORIZATION_ERROR]: 'Authorization failed',
    [ErrorCode.EXTERNAL_SERVICE_ERROR]: 'External service error',
    [ErrorCode.RATE_LIMIT_ERROR]: 'Rate limit exceeded',
    [ErrorCode.CSRF_ERROR]: 'CSRF validation failed'
  }
  
  return messages[code] || 'An error occurred'
}

/**
Validation error helper

**특성:** `exported`

#### `generateRequestId`

Standard API Error Response
Provides consistent error handling across all API routes
/

export interface APIError {
  error: string
  details?: string | object
  code?: string
  timestamp?: string
  requestId?: string
}

export interface APIErrorResponse {
  success: false
  error: APIError
}

export enum ErrorCode {
  // Client errors (4xx)
  BAD_REQUEST = 'BAD_REQUEST',
  UNAUTHORIZED = 'UNAUTHORIZED',
  FORBIDDEN = 'FORBIDDEN',
  NOT_FOUND = 'NOT_FOUND',
  METHOD_NOT_ALLOWED = 'METHOD_NOT_ALLOWED',
  CONFLICT = 'CONFLICT',
  UNPROCESSABLE_ENTITY = 'UNPROCESSABLE_ENTITY',
  TOO_MANY_REQUESTS = 'TOO_MANY_REQUESTS',
  
  // Server errors (5xx)
  INTERNAL_SERVER_ERROR = 'INTERNAL_SERVER_ERROR',
  NOT_IMPLEMENTED = 'NOT_IMPLEMENTED',
  BAD_GATEWAY = 'BAD_GATEWAY',
  SERVICE_UNAVAILABLE = 'SERVICE_UNAVAILABLE',
  GATEWAY_TIMEOUT = 'GATEWAY_TIMEOUT',
  
  // Custom errors
  DATABASE_ERROR = 'DATABASE_ERROR',
  VALIDATION_ERROR = 'VALIDATION_ERROR',
  AUTHENTICATION_ERROR = 'AUTHENTICATION_ERROR',
  AUTHORIZATION_ERROR = 'AUTHORIZATION_ERROR',
  EXTERNAL_SERVICE_ERROR = 'EXTERNAL_SERVICE_ERROR',
  RATE_LIMIT_ERROR = 'RATE_LIMIT_ERROR',
  CSRF_ERROR = 'CSRF_ERROR'
}

const ErrorStatusMap: Record<ErrorCode, number> = {
  // Client errors
  [ErrorCode.BAD_REQUEST]: 400,
  [ErrorCode.UNAUTHORIZED]: 401,
  [ErrorCode.FORBIDDEN]: 403,
  [ErrorCode.NOT_FOUND]: 404,
  [ErrorCode.METHOD_NOT_ALLOWED]: 405,
  [ErrorCode.CONFLICT]: 409,
  [ErrorCode.UNPROCESSABLE_ENTITY]: 422,
  [ErrorCode.TOO_MANY_REQUESTS]: 429,
  
  // Server errors
  [ErrorCode.INTERNAL_SERVER_ERROR]: 500,
  [ErrorCode.NOT_IMPLEMENTED]: 501,
  [ErrorCode.BAD_GATEWAY]: 502,
  [ErrorCode.SERVICE_UNAVAILABLE]: 503,
  [ErrorCode.GATEWAY_TIMEOUT]: 504,
  
  // Custom errors mapped to appropriate status codes
  [ErrorCode.DATABASE_ERROR]: 500,
  [ErrorCode.VALIDATION_ERROR]: 400,
  [ErrorCode.AUTHENTICATION_ERROR]: 401,
  [ErrorCode.AUTHORIZATION_ERROR]: 403,
  [ErrorCode.EXTERNAL_SERVICE_ERROR]: 502,
  [ErrorCode.RATE_LIMIT_ERROR]: 429,
  [ErrorCode.CSRF_ERROR]: 403
}

/**
Create a standardized error response
/
export function createErrorResponse(
  code: ErrorCode,
  message?: string,
  details?: string | object,
  requestId?: string
): NextResponse<APIErrorResponse> {
  const status = ErrorStatusMap[code] || 500
  const timestamp = new Date().toISOString()
  
  const errorResponse: APIErrorResponse = {
    success: false,
    error: {
      error: message || getDefaultErrorMessage(code),
      code,
      timestamp,
      ...(details && { details }),
      ...(requestId && { requestId })
    }
  }
  
  // Log server errors
  if (status >= 500) {
    // Server error detected
  }
  
  return NextResponse.json(errorResponse, { status })
}

/**
Handle unknown errors and convert them to standardized responses
/
export function handleApiError(
  error: unknown,
  defaultCode: ErrorCode = ErrorCode.INTERNAL_SERVER_ERROR,
  requestId?: string
): NextResponse<APIErrorResponse> {
  // Handle known error types
  if (error instanceof Error) {
    // Prisma errors
    if (error.message.includes('P2002')) {
      return createErrorResponse(
        ErrorCode.CONFLICT,
        'Resource already exists',
        error.message,
        requestId
      )
    }
    
    if (error.message.includes('P2025')) {
      return createErrorResponse(
        ErrorCode.NOT_FOUND,
        'Resource not found',
        error.message,
        requestId
      )
    }
    
    // Database connection errors
    if (error.message.includes('database') || error.message.includes('prisma')) {
      return createErrorResponse(
        ErrorCode.DATABASE_ERROR,
        'Database operation failed',
        process.env.NODE_ENV === 'development' ? error.message : undefined,
        requestId
      )
    }
    
    // Default error response
    return createErrorResponse(
      defaultCode,
      error.message,
      process.env.NODE_ENV === 'development' ? error.stack : undefined,
      requestId
    )
  }
  
  // Handle non-Error objects
  return createErrorResponse(
    defaultCode,
    'An unexpected error occurred',
    process.env.NODE_ENV === 'development' ? error : undefined,
    requestId
  )
}

/**
Get default error message for error code
/
function getDefaultErrorMessage(code: ErrorCode): string {
  const messages: Record<ErrorCode, string> = {
    [ErrorCode.BAD_REQUEST]: 'Invalid request',
    [ErrorCode.UNAUTHORIZED]: 'Authentication required',
    [ErrorCode.FORBIDDEN]: 'Access denied',
    [ErrorCode.NOT_FOUND]: 'Resource not found',
    [ErrorCode.METHOD_NOT_ALLOWED]: 'Method not allowed',
    [ErrorCode.CONFLICT]: 'Resource conflict',
    [ErrorCode.UNPROCESSABLE_ENTITY]: 'Unprocessable entity',
    [ErrorCode.TOO_MANY_REQUESTS]: 'Too many requests',
    [ErrorCode.INTERNAL_SERVER_ERROR]: 'Internal server error',
    [ErrorCode.NOT_IMPLEMENTED]: 'Not implemented',
    [ErrorCode.BAD_GATEWAY]: 'Bad gateway',
    [ErrorCode.SERVICE_UNAVAILABLE]: 'Service unavailable',
    [ErrorCode.GATEWAY_TIMEOUT]: 'Gateway timeout',
    [ErrorCode.DATABASE_ERROR]: 'Database error',
    [ErrorCode.VALIDATION_ERROR]: 'Validation failed',
    [ErrorCode.AUTHENTICATION_ERROR]: 'Authentication failed',
    [ErrorCode.AUTHORIZATION_ERROR]: 'Authorization failed',
    [ErrorCode.EXTERNAL_SERVICE_ERROR]: 'External service error',
    [ErrorCode.RATE_LIMIT_ERROR]: 'Rate limit exceeded',
    [ErrorCode.CSRF_ERROR]: 'CSRF validation failed'
  }
  
  return messages[code] || 'An error occurred'
}

/**
Validation error helper
/
export function createValidationError(
  errors: Record<string, string[]> | string,
  requestId?: string
): NextResponse<APIErrorResponse> {
  return createErrorResponse(
    ErrorCode.VALIDATION_ERROR,
    'Validation failed',
    errors,
    requestId
  )
}

/**
Generate request ID for tracking

**특성:** `exported`

### 🔗 Interfaces

#### `APIError`

Standard API Error Response
Provides consistent error handling across all API routes

**특성:** `exported`

#### `APIErrorResponse`

**특성:** `exported`


## route-handler.ts

**파일 경로:** `lib/api/route-handler.ts`

**설명:** Secure API Route Handler
Wraps API routes with validation, authentication, and error handling

**파일 정보:**
- 📏 크기: 6958 bytes
- 📄 라인 수: 243
- 🔧 함수: 0개
- 📦 클래스: 2개
- 🏷️ 타입: 0개
- 🔗 인터페이스: 1개

**Exports:**
- `APIError`
- `createRouteHandler`
- `responses`

### 📦 Classes

#### `for`

#### `APIError`

**특성:** `exported`

### 🔗 Interfaces

#### `RouteHandlerOptions`


---

*📅 생성일: 2025. 7. 29. 오후 5:23:13*
*📊 총 52개 파일 문서화*
